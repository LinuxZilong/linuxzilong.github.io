Vagrant.configure("2") do |config|
    config.vm.define "node1" do |node1|
      node1.vm.box = "ubuntu/focal64"
      ssh_pub_key = File.readlines("#{Dir.home}/.ssh/id_rsa.pub").first.strip
      node1.vm.provision "shell", inline: <<-SHELL
          mkdir -p /home/vagrant/.ssh
          echo #{ssh_pub_key} >> /home/vagrant/.ssh/authorized_keys
          # curl -fsSL https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub >> output.txt
          chown -R vagrant:vagrant /home/vagrant/.ssh
          chmod 700 /home/vagrant/.ssh
          chmod 600 /home/vagrant/.ssh/authorized_keys
      SHELL
  end
end
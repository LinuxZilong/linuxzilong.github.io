---
draft: true
---
 ## SCP

`scp` 命令将目录从一个远程服务器复制到另一个远程服务器上的新目录，命令如下：

```shell
$ scp -r server1:dir1 server2:dir2
```

如果在 `server2` 上不存在 `dir2`，这可以正常工作，它会创建一个名为 `dir2` 的新目录，其中包含 `server1` 上 `dir1` 的所有内容。

但是当 `dir2` 已经存在于 `server2` 上时，就会出现问题，已经存在的文件不会被覆盖。

**解决办法：**

```shell
$ scp -prq server1:dir1/. server2:dir2/
```

在文件目录后面加个点 `.`，将复制该目录的内容，而不是目录本身。

## CP

如果知道多个文件的名字时，可以使用 `cp {filename1,filename2,...}` 目标/，目标必须是个文件夹

> -a：此参数的效果和同时指定"-dpR"参数相同；
> -d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录；
> -f：强行复制文件或目录，不论目标文件或目录是否已存在；
> -i：覆盖既有文件之前先询问用户；
> -l：对源文件建立硬连接，而非复制文件；
> -p：保留源文件或目录的属性；
> -R/r：递归处理，将指定目录下的所有文件与子目录一并处理；
> -s：对源文件建立符号连接，而非复制文件；
> -u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；
> -S：在备份文件时，用指定的后缀“SUFFIX”代替文件的默认后缀；
> -b：覆盖已存在的文件目标前将目标文件备份；
> -v：详细显示命令执行的操作。

**一.通配符的使用**

> 通配符是一种特殊语句，主要有星号(*)和问号(?)，用来模糊搜索文件。主要的通配符有：
>
> >\*     匹配任意长度的字符串
> >
> >?     匹配一个长度的字符
> >
> >[...]   匹配其中指定的字符
> >
> >[a-z]  匹配指定的字符范围
> >
> >[^...]   除了其中指定的字符，其他均可匹配
>
> **例**1：*可以代替0个或多个字符。如果需要拷贝以ABC开头的文件，可以输入ABC*，拷贝以ABC开头的所有文件类型的文件，如ABCD.txt、ABCDEFG.exe、ABCZH.dll等。如果只需要拷贝txt文件，则可以输入ABC*.txt，拷贝以ABC为开头的TXT类型的文件，如ABC.txt、ABC12.txt。
>
> **例**2：？则只匹配一个字符，[1,b,8]就匹配括号中的1，b和8，这些都可以混搭使用。在linux2.6.14内核中，ls可以看到如图：



> 如果需要将.IAB .IAD .IMB .IMD和.WK3 这5个文件拷贝到根目录的tmp下，可以使用如下命令：
>
> cp fs2410_kernel_2614.[I,W]?? /tmp
>
> [a-z]就是匹配字母a到z的所有字符，也就是所有小写字母。[^A]就是除了A字符之外，其他字符均可匹配。灵活运用通配符可以方便的拷贝多个文件

**二.管道的使用**

> 如果你只是想拷贝最后的10个文件，或者你拷贝的文件没有共同字符，管道或许可以帮的上忙。
>
> 命令行中的 | 就是管道，可以把第一个命令输出作为第二个命令的输入
>
> > **例**1： ls /usr/bin/ | wc -w
> >
> > 显示/usr/bin/中有多少个文件（不包括隐藏文件，要显示隐藏文件则应该 ls -a /usr/bin/ | wc -w）
> >
> > **例**2： ls | tail -11| xargs -i cp -r {} /tmp/
> >
> > 拷贝最后11个文件到根目录的/tmp/下（如要拷贝头5个文件，则将tail -11 换成 head -5）
>
> wc head tail xargs这些就请自行man手册一下。
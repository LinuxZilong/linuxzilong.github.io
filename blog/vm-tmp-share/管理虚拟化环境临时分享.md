---
title: 管理虚拟化环境临时分享
---
## 管理虚拟机环境
- https://developer.hashicorp.com/vagrant/downloads?product_intent=vagrant
- https://www.virtualbox.org/
- https://git-scm.com/
- https://ngrok.com/download
先安装这几个工具

打开 gitbash 为当前用户生成密钥
```bash
ssh-keygen -t rsa -N '' -f ~/.ssh/id_rsa -q
```

下载 [vagrant-kalilinux.zip](/tmp/vagrant-kalilinux.zip) 解压后进入目录执行 `vagrant up` 启动虚拟机

vagrant status 查看虚拟机
vagrant ssh 主机名 连接虚拟机
vagrant destroy 删除虚拟机

::: tip
如果要显示gui界面 请修改 vagrantfile 中的 `vb.gui = true`
:::

:::info
更多用法配置见：https://github.com/SJFCS/cloudnative.love/tree/main/about/_Playground/vagrant-yaml 
:::


## 公网映射
注册ngrok获取``<token>`
```bash
ngrok config add-authtoken <token>
ngrok http 80
```
比如我把虚拟机22端口映射到了宿主机8121上，现在把宿主机的8121映射到公网
宿主机执行 `ngrok tcp 8121` 既可


建议使用wsl而不是虚拟机,直接`wsl install`开启既可，见：https://www.cloudnative.love/about/Workflow/Windows/WSL/


## 演示 
import AsciinemaPlayer from '@site/src/components/AsciinemaPlayer';

<AsciinemaPlayer
    src="/tmp/vagrant-kalilinux.cast"
    poster="npt:0:5"
    preload={true}
    autoPlay={true}
    idleTimeLimit="2"
/>

